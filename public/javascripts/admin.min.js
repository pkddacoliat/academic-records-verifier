function loadStudentsTableForAdmin(){let e=[];return $("#studentsTableAdmin").DataTable({ajax:{type:"GET",url:"http://localhost:3000/api/Student",data:e=>JSON.stringify(e),dataSrc:"",complete:a=>{a.responseJSON.forEach(a=>{e.push(a.participantNo)})}},columns:[{data:"participantNo"},{data:"contact.firstName"},{data:"contact.lastName"},{data:"contact.email"},{data:"college",render:e=>e.substring(e.indexOf("#")+1)},{data:"course",render:e=>e.substring(e.indexOf("#")+1)},{data:"currentCredits"},{data:"graduated"}]}),e}function loadCoursesTable(){let e=[];return $("#coursesTable").DataTable({ajax:{type:"GET",url:"http://localhost:3000/api/Course",data:e=>JSON.stringify(e),dataSrc:"",complete:a=>{a.responseJSON.forEach(a=>{e.push(a.courseCode)})}},columns:[{data:"courseCode"},{data:"courseTitle"},{data:"courseType",render:e=>"CERTIFICATE"===e?"Certificate":"HIGHER_CERTIFICATE"===e?"Higher Certificate":"HIGHER_CERTIFICATE_BSC"===e?"Higher Certificate, BSc":"HONOURS_DEGREE"===e?"Honours Degree":void 0},{data:"qualificationType",render:e=>"SPECIAL_AWARD"===e?"Special Award":"HIGHER_CERTIFICATE"===e?"Higher Certificate":"BSC"===e?"BSc":"BSC_HONOURS"===e?"BSc Honours":void 0},{data:"deliveryMode",render:e=>"PART_TIME"===e?"Part Time":"FULL_TIME"===e?"Full Time":void 0},{data:"department"},{data:"NFQLevel"},{data:"noOfSemesters"},{data:"totalCredits"}]}),e}function loadModulesTable(){let e=[];return $("#modulesTable").DataTable({ajax:{type:"GET",url:"http://localhost:3000/api/Module",data:e=>JSON.stringify(e),dataSrc:"",complete:a=>{a.responseJSON.forEach(a=>{e.push(a.crn)})}},columns:[{data:"crn"},{data:"moduleCode"},{data:"title"},{data:"credits"},{data:"Level",render:e=>"FUNDAMENTAL"===e?"Fundamental":"ADVANCED"===e?"Advanced":void 0},{data:"deliveries",render:e=>e[0].course.substring(e[0].course.indexOf("#")+1)}]}),e}function convertCodeToDepartment(e){return"111"===e?"Accounting Information Systems":"127"===e?"Applied Physics and Instrumentation":"201"===e?"Applied Social Studies":"122"===e?"Architecture":"213"===e?"Art and Design Education":"212"===e?"Art Therapy and Continuing Visual Education":"235"===e?"Arts in Health and Education":"128"===e?"Biological Sciences":"185"===e?"Biological Sciences":"129"===e?"Chemistry":"133"===e?"CIT Cork School of Music":"134"===e?"CIT Crawford College of Art and Design":"252"===e?"CIT Crawford College of Art and Design and UCC School of Education":"120"===e?"Civil, Structural and Environmental Engine":"130"===e?"Computer Science":"121"===e?"Construction":"112"===e?"Continuing Education":"113"===e?"DEIS: Department of Education Development":"114"===e?"Educational Opportunities":"123"===e?"Electrical and Electronic Engineering":"124"===e?"Electronic Engineering":"204"===e?"Fine Art and Applied Art, CIT CCAD":"197"===e?"Management and Enterprise":"115"===e?"Management and Marketing":"199"===e?"Marketing and International Business":"131"===e?"Mathematics":"126"===e?"Mechanical and Automotive Engineering":"125"===e?"Mechanical, Biomedical and Manufacturing Eng":"116"===e?"Media Communications":"132"===e?"National Maritime College":"198"===e?"Organisation and Professional Development":"214"===e?"Physical Sciences":"119"===e?"Process, Energy and Transport Engineering":"200"===e?"Sport, Leisure and Childhood Studies":"180"===e?"Teaching and Learning Unit":"224"===e?"Tourism and Hospitality":void 0}function resetAddModuleModal(){$("#deliverySelect option").remove(),$("#deliverySelect").append("<option disabled selected hidden>Choose Course...</option")}function resetAssignGradeModal(){$("#studentSelect option").remove(),$("#studentSelect").append("<option disabled selected hidden>Choose Student...</option"),$("#moduleSelect option").remove(),$("#moduleSelect").append("<option disabled selected hidden>Choose Module...</option")}$(()=>{if($("body").is(".admin")){let e=loadStudentsTableForAdmin(),a=loadCoursesTable(),t=loadModulesTable();$("#addCourseBtn").on("click",()=>{$("#addCourseModal").modal({backdrop:"static",keyboard:!1})}),$("#addCourseModalBtn").click(()=>{let e=$("#addCourseForm :input").serializeArray();return e.forEach(e=>{"department"===e.name&&(e.value=convertCodeToDepartment(e.value))}),$.Deferred(a=>{$.ajax({type:"POST",url:"http://localhost:3000/api/Course",beforeSend:()=>{$("#addCourseModalSpinner").attr("hidden",!1)},data:{$class:"ie.cit.blockchain.course.Course",courseCode:e[0].value,courseTitle:e[1].value,fieldOfStudy:[],department:e[2].value,courseType:e[3].value,qualificationType:e[4].value,deliveryMode:e[5].value,noOfSemesters:e[6].value,totalCredits:e[7].value,NFQLevel:e[6].value,modules:[]},success:e=>{a.resolve(e),$("#addCourseModalSpinner").attr("hidden",!0),$("#addCourseModal").modal("hide"),$("#coursesTable").DataTable().ajax.reload()},error:()=>{$("#addCourseModalSpinner").attr("hidden",!0)}})})}),$("#addModuleBtn").on("click",()=>{resetAddModuleModal(),$("#addModuleModal").modal({backdrop:"static",keyboard:!1}),a.forEach(e=>{$("#deliverySelect").append('<option class="deliverySelectOption" value="'+e+'">'+e+"</option>")})}),$("#addModuleModalBtn").click(()=>{let e=$("#addModuleForm :input").serializeArray(),a="";return e.forEach(e=>{"subject"!==e.name&&"course"!==e.name||(a+=e.value)}),e.push({name:"subjectCourse",value:a}),$.Deferred(a=>{$.ajax({type:"POST",url:"http://localhost:3000/api/Module",beforeSend:()=>{$("#addModuleModalSpinner").attr("hidden",!1)},data:{$class:"ie.cit.blockchain.module.Module",crn:e[0].value,moduleCode:e[9].value,title:e[3].value,credits:e[4].value,Level:e[5].value,deliveries:[{$class:"ie.cit.blockchain.module.Delivery",course:"resource:ie.cit.blockchain.course.Course#"+e[6].value,stage:e[7].value,semester:e[8].value}]},success:e=>{a.resolve(e),$("#addModuleModalSpinner").attr("hidden",!0),$("#addModuleModal").modal("hide"),$("#modulesTable").DataTable().ajax.reload()},error:()=>{$("#addModuleModalSpinner").attr("hidden",!0)}})})}),$("#assignGradeBtn").on("click",()=>{resetAssignGradeModal(),$("#assignGradeModal").modal({backdrop:"static",keyboard:!1}),e.forEach(e=>{$("#studentSelect").append('<option value="'+e+'">'+e+"</option>")}),t.forEach(e=>{$("#moduleSelect").append('<option value="'+e+'">'+e+"</option>")})}),$("#assignGradeModalBtn").click(()=>{let e=$("#assignGradeForm :input").serializeArray();return $.Deferred(a=>{$.ajax({type:"POST",url:"http://localhost:3000/api/AssignGrade",beforeSend:()=>{$("#assignGradeModalSpinner").attr("hidden",!1)},data:{$class:"ie.cit.blockchain.grade.AssignGrade",moduleCRN:e[1].value,studentNumber:e[0].value,finalGrade:e[2].value},success:e=>{a.resolve(e),$("#assignGradeModalSpinner").attr("hidden",!0),$("#assignGradeModal").modal("hide"),$("#studentsTableAdmin").DataTable().ajax.reload()},error:()=>{$("#assignGradeModalSpinner").attr("hidden",!0)}})})})}});