function loadStudentsTable(){$.ajax({type:"GET",url:"http://localhost:3000/api/Student",success:e=>{$("#studentsTable").DataTable({data:e,columns:[{data:"participantNo"},{data:"contact.firstName"},{data:"contact.lastName"},{data:"contact.email"},{data:"college",render:e=>e.substring(e.indexOf("#")+1)},{data:"course",render:e=>e.substring(e.indexOf("#")+1)},{data:"currentCredits"},{data:"graduated"}]})}})}function loadCoursesTable(){let e=[];return $.ajax({type:"GET",url:"http://localhost:3000/api/Course",success:a=>{a.forEach(a=>{e.push(a.courseCode)}),$("#coursesTable").DataTable({data:a,columns:[{data:"courseCode"},{data:"courseTitle"},{data:"courseType"},{data:"qualificationType"},{data:"deliveryMode"},{data:"department"},{data:"NFQLevel"},{data:"noOfSemesters"},{data:"totalCredits"}]})}}),e}function loadModulesTable(){$.ajax({type:"GET",url:"http://localhost:3000/api/Module",success:e=>{$("#modulesTable").DataTable({data:e,columns:[{data:"crn"},{data:"moduleCode"},{data:"title"},{data:"credits"},{data:"Level"},{data:"deliveries",render:e=>e[0].course.substring(e[0].course.indexOf("#")+1)}]})}})}function convertCodeToDepartment(e){return"111"===e?"Accounting Information Systems":"127"===e?"Applied Physics and Instrumentation":"201"===e?"Applied Social Studies":"122"===e?"Architecture":"213"===e?"Art and Design Education":"212"===e?"Art Therapy and Continuing Visual Education":"235"===e?"Arts in Health and Education":"128"===e?"Biological Sciences":"185"===e?"Biological Sciences":"129"===e?"Chemistry":"133"===e?"CIT Cork School of Music":"134"===e?"CIT Crawford College of Art and Design":"252"===e?"CIT Crawford College of Art and Design and UCC School of Education":"120"===e?"Civil, Structural and Environmental Engine":"130"===e?"Computer Science":"121"===e?"Construction":"112"===e?"Continuing Education":"113"===e?"DEIS: Department of Education Development":"114"===e?"Educational Opportunities":"123"===e?"Electrical and Electronic Engineering":"124"===e?"Electronic Engineering":"204"===e?"Fine Art and Applied Art, CIT CCAD":"197"===e?"Management and Enterprise":"115"===e?"Management and Marketing":"199"===e?"Marketing and International Business":"131"===e?"Mathematics":"126"===e?"Mechanical and Automotive Engineering":"125"===e?"Mechanical, Biomedical and Manufacturing Eng":"116"===e?"Media Communications":"132"===e?"National Maritime College":"198"===e?"Organisation and Professional Development":"214"===e?"Physical Sciences":"119"===e?"Process, Energy and Transport Engineering":"200"===e?"Sport, Leisure and Childhood Studies":"180"===e?"Teaching and Learning Unit":"224"===e?"Tourism and Hospitality":void 0}function resetAddModuleModal(){$("#deliverySelect option").remove()}$(()=>{if($("body").is(".admin")){loadStudentsTable();let e=loadCoursesTable();loadModulesTable(),$("#addCourseBtn").on("click",()=>{$("#addCourseModal").modal({backdrop:"static",keyboard:!1})}),$("#addCourseModalBtn").click(()=>{let a=$("#addCourseForm :input").serializeArray();return a.forEach(e=>{"department"===e.name&&(e.value=convertCodeToDepartment(e.value))}),$.Deferred(t=>{$.ajax({type:"POST",url:"http://localhost:3000/api/Course",beforeSend:()=>{$("#addCourseModalSpinner").attr("hidden",!1)},data:{$class:"ie.cit.blockchain.course.Course",courseCode:a[0].value,courseTitle:a[1].value,fieldOfStudy:[],department:a[2].value,courseType:a[3].value,qualificationType:a[4].value,deliveryMode:a[5].value,noOfSemesters:a[6].value,totalCredits:a[7].value,NFQLevel:a[6].value,modules:[]},success:a=>{e.push(a.courseCode),t.resolve(a),$("#addCourseModalSpinner").attr("hidden",!0),$("#addCourseModal").modal("hide")},error:()=>{$("#addCourseModalSpinner").attr("hidden",!0)}})})}),$("#addModuleBtn").on("click",()=>{resetAddModuleModal(),$("#addModuleModal").modal({backdrop:"static",keyboard:!1}),e.forEach(e=>{$("#deliverySelect").append('<option class="deliverySelectOption" value="'+e+'">'+e+"</option>")})}),$("#addModuleModalBtn").click(()=>{let e=$("#addModuleForm :input").serializeArray(),a="";return e.forEach(e=>{"subject"!==e.name&&"course"!==e.name||(a+=e.value)}),e.push({name:"subjectCourse",value:a}),$.Deferred(a=>{$.ajax({type:"POST",url:"http://localhost:3000/api/Module",beforeSend:()=>{$("#addModuleModalSpinner").attr("hidden",!1)},data:{$class:"ie.cit.blockchain.module.Module",crn:e[0].value,moduleCode:e[9].value,title:e[3].value,credits:e[4].value,Level:e[5].value,deliveries:[{$class:"ie.cit.blockchain.module.Delivery",course:"resource:ie.cit.blockchain.course.Course#"+e[6].value,stage:e[7].value,semester:e[8].value}]},success:e=>{a.resolve(e),$("#addModuleModalSpinner").attr("hidden",!0),$("#addModuleModal").modal("hide")},error:()=>{$("#addModuleModalSpinner").attr("hidden",!0)}})})})}});